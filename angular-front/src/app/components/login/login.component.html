<app-guest-header />
<div class=" container w-50 my-5 ">
    <div class="login-form shadow-lg" style="background-color: #ffffff;">

        <div *ngIf="sessionError">
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <strong>Alert!</strong> You need to log in first.
            </div>
        </div>
        <h5 class="text-center my-3" style="color: #b83807;">Login</h5>
        <div *ngIf="submitted && backendErrors && getErrorMessages().length > 0" class="alert alert-danger">
            <ul *ngIf="loginError == '' ">
                <li *ngFor="let error of getErrorMessages()">{{ error }}</li>
            </ul>
            <ul *ngIf="loginError != '' ">
                <li>{{ loginError }}</li>
            </ul>
        </div>

        <form (ngSubmit)="onSubmit(loginForm)" #loginForm="ngForm">
        <div class="row">
            <div class="col-6">
                <ng-lottie [options]="logInAnimationOptions" width="100%" height="100%"
                (animationCreated)="logInAnimationCreated($event)">
            </ng-lottie>
            </div>
            <div class="col-6 pt-5">
            <div class="mb-3">
                    <div class="form-floating">
                    <input type="email" class="form-control" id="email" placeholder="Email" name="email" required email
                        ngModel>
                    <label for="email">Email</label>
                    <div *ngIf="submitted && loginForm.controls['email']?.invalid" class="text-danger">
                        <div *ngIf="loginForm.controls['email']?.errors?.['required']">
                            Email is required.
                        </div>
                        <div *ngIf="loginForm.controls['email']?.errors?.['email']">
                            Please enter a valid email address.
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <div class="form-floating">
                    <input type="password" class="form-control" id="password" placeholder="Your password"
                        name="password" required ngModel>
                    <label for="password">Password</label>
                    <div *ngIf="submitted && loginForm.controls['password']?.invalid" class="text-danger">
                        Password is required.
                    </div>
                </div>
            </div>

            <div class="my-3">
                <div class="form-check">
                    <input type="checkbox" id="checkbox" class="form-check-input" style="border: 1px solid #b83807;">
                    <label for="checkbox" class="form-check-label fw-bold">Remember Me</label>
                </div>
            </div>                
            </div>
        </div>


            <div class="text-center my-4">
                <button type="submit" class="btn w-50 fw-bolder text-white" data-bs-toggle="modal"
                data-bs-target="#myModal" (click)="openModal()">Login</button>
            </div>

            <div class="text-center">
                <p class="text-center fw-bold">Don't have an account?
                    <a routerLink="/register" class="nav-link" aria-current="page">Create your account</a>

            </div>

            <div class="modal" id="myModal">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <!-- Modal body -->
                        <div class="modal-body">
                            <ng-lottie 
                            [options]="successAnimationOptions"
                            (animationCreated)="successAnimationCreated($event)"
                            style="height:50%; width:50%;">
                          </ng-lottie>
                        </div>
                        <div class="modal-body d-flex justify-content-center">
                            <button class="btn" (click)="closeModal()" data-bs-toggle="modal"
                                style="background-color: #231717; color:white">Close</button>

                        </div>
                    </div>
                </div>

            </div>
        </form>

    </div>